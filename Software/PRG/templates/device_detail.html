{% extends "base.html" %}

{% block title %}{{ device.name }} - Benning Device Manager{% endblock %}

{% block content %}
<div class="device-detail">
    <div class="detail-header">
        <h2>üîß {{ device.name }}</h2>
        <span class="badge badge-{{ device.status }}">{{ device.status }}</span>
    </div>
    
    <div class="detail-grid">
        <div class="detail-card">
            <h3>Ger√§teinformationen</h3>
            <dl>
                <dt>Ger√§te-ID:</dt><dd><strong>{{ device.customer_device_id }}</strong></dd>
                <dt>Kunde:</dt><dd>{{ device.customer }}</dd>
                <dt>Name:</dt><dd>{{ device.name }}</dd>
                <dt>Typ:</dt><dd>{{ device.type }}</dd>
                <dt>Standort:</dt><dd>{{ device.location }}</dd>
                <dt>Hersteller:</dt><dd>{{ device.manufacturer }}</dd>
                <dt>Seriennummer:</dt><dd>{{ device.serial_number }}</dd>
                <dt>Kaufdatum:</dt><dd>{{ device.purchase_date }}</dd>
                <dt>Status:</dt><dd><span class="badge badge-{{ device.status }}">{{ device.status }}</span></dd>
            </dl>
        </div>
        
        <div class="detail-card">
            <h3>Pr√ºfstatus</h3>
            <dl>
                <dt>Letzte Pr√ºfung:</dt><dd>{{ device.last_inspection or 'Keine' }}</dd>
                <dt>N√§chste Pr√ºfung:</dt><dd>{{ device.next_inspection or 'Nicht geplant' }}</dd>
            </dl>
            
            <div class="qr-section">
                <h3>QR-Code</h3>
                {% if device.qr_code %}
                    <img src="{{ device.qr_code }}" alt="QR-Code" class="qr-code-large" title="{{ device.customer_device_id }}" />
                    <p class="qr-info">{{ device.customer_device_id }}</p>
                {% else %}
                    <p class="text-muted">QR-Code konnte nicht generiert werden</p>
                {% endif %}
            </div>
        </div>
    </div>
    
    {% if device.notes %}
    <div class="detail-card">
        <h3>üìù Notizen</h3>
        <p>{{ device.notes }}</p>
    </div>
    {% endif %}
    
    <div class="inspections-section">
        <h3>üìã Pr√ºfhistorie</h3>
        {% if inspections %}
        <table class="device-table">
            <thead>
                <tr>
                    <th>Datum</th>
                    <th>Pr√ºfer</th>
                    <th>Ergebnis</th>
                    <th>Notizen</th>
                </tr>
            </thead>
            <tbody>
                {% for inspection in inspections %}
                <tr>
                    <td>{{ inspection.inspection_date }}</td>
                    <td>{{ inspection.inspector_name }}</td>
                    <td><span class="badge badge-{{ inspection.result }}">{{ inspection.result }}</span></td>
                    <td>{{ inspection.notes }}</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
        {% else %}
        <p class="text-muted">Keine Pr√ºfungen vorhanden.</p>
        {% endif %}
    </div>
    
    <div class="button-group">
        <button onclick="history.back()" class="btn btn-secondary">‚Üê Zur√ºck</button>
        <a href="{{ url_for('devices') }}" class="btn btn-secondary">üìã Zur Liste</a>
    </div>
</div>

<style>
.device-detail {
    padding: 20px;
}

.detail-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 30px;
    padding-bottom: 15px;
    border-bottom: 2px solid #dee2e6;
}

.detail-header h2 {
    margin: 0;
}

.detail-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
    gap: 20px;
    margin-bottom: 20px;
}

.detail-card {
    background: white;
    border: 1px solid #ddd;
    border-radius: 8px;
    padding: 20px;
    box-shadow: 0 2px 4px rgba(0,0,0,0.1);
}

.detail-card h3 {
    margin-top: 0;
    margin-bottom: 15px;
    padding-bottom: 10px;
    border-bottom: 2px solid #f0f0f0;
}

.detail-card dl {
    display: grid;
    grid-template-columns: 150px 1fr;
    gap: 10px 20px;
}

.detail-card dt {
    font-weight: 600;
    color: #555;
}

.detail-card dd {
    margin: 0;
    color: #333;
}

.qr-section {
    text-align: center;
    padding: 20px;
    background-color: #f8f9fa;
    border-radius: 8px;
    margin-top: 15px;
}

.qr-section h3 {
    margin-top: 0;
    border: none;
}

.qr-code-large {
    width: 200px;
    height: 200px;
    border: 2px solid #ddd;
    padding: 10px;
    background: white;
    border-radius: 4px;
}

.qr-info {
    margin-top: 10px;
    font-size: 12px;
    color: #666;
}

.badge {
    display: inline-block;
    padding: 4px 8px;
    border-radius: 4px;
    font-size: 12px;
    font-weight: 600;
}

.badge-active {
    background-color: #d4edda;
    color: #155724;
}

.badge-inactive {
    background-color: #e2e3e5;
    color: #383d41;
}

.badge-maintenance {
    background-color: #fff3cd;
    color: #856404;
}

.inspections-section {
    background: white;
    border: 1px solid #ddd;
    border-radius: 8px;
    padding: 20px;
    margin-bottom: 20px;
    box-shadow: 0 2px 4px rgba(0,0,0,0.1);
}

.inspections-section h3 {
    margin-top: 0;
}

.device-table {
    width: 100%;
    border-collapse: collapse;
}

.device-table thead {
    background-color: #f8f9fa;
}

.device-table th {
    padding: 12px;
    text-align: left;
    font-weight: 600;
    border-bottom: 2px solid #dee2e6;
}

.device-table td {
    padding: 12px;
    border-bottom: 1px solid #dee2e6;
}

.device-table tbody tr:hover {
    background-color: #f8f9fa;
}

.button-group {
    display: flex;
    gap: 10px;
    margin-top: 20px;
}

.btn {
    padding: 10px 20px;
    border-radius: 4px;
    text-decoration: none;
    display: inline-block;
    transition: all 0.2s;
    border: none;
    cursor: pointer;
}

.btn-secondary {
    background-color: #6c757d;
    color: white;
}

.btn-secondary:hover {
    background-color: #545b62;
}

.text-muted {
    color: #999;
}
</style>
{% endblock %}
