{% extends "base.html" %}

{% block title %}Ger√§teliste - Benning Device Manager{% endblock %}

{% block content %}
<div class="devices-list">
    <h2>üìã Ger√§teliste</h2>
    
    <div class="toolbar">
        <button onclick="location.href='{{ url_for('quick_add') }}'" class="btn-primary">‚ûï Neues Ger√§t</button>
    </div>
    
    {% if error %}
    <div class="alert alert-danger">
        ‚ö†Ô∏è Fehler: {{ error }}
    </div>
    {% endif %}
    
    {% if devices %}
    <table class="device-table">
        <thead>
            <tr>
                <th>ID</th>
                <th>Name</th>
                <th>Typ</th>
                <th>Standort</th>
                <th>Hersteller</th>
                <th>Letzte Pr√ºfung</th>
                <th>N√§chste Pr√ºfung</th>
                <th>Status</th>
                <th>QR-Code</th>
                <th>Aktionen</th>
            </tr>
        </thead>
        <tbody>
            {% for device in devices %}
            <tr>
                <td><strong>{{ device.id }}</strong></td>
                <td>{{ device.name }}</td>
                <td>{{ device.type }}</td>
                <td>{{ device.location }}</td>
                <td>{{ device.manufacturer }}</td>
                <td>{{ device.last_inspection }}</td>
                <td>{{ device.next_inspection }}</td>
                <td><span class="badge badge-{{ device.status }}">{{ device.status }}</span></td>
                <td>
                    {% if device.qr_code %}
                        <img src="{{ device.qr_code }}" alt="QR-Code" class="qr-code-small" title="{{ device.customer_device_id }}" />
                    {% else %}
                        <span class="text-muted">-</span>
                    {% endif %}
                </td>
                <td>
                    <a href="{{ url_for('device_detail', device_id=device.id) }}" class="btn-small">Details</a>
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
    {% else %}
    <div class="alert alert-info">
        ‚ÑπÔ∏è Keine Ger√§te gefunden. <a href="{{ url_for('quick_add') }}">Neues Ger√§t erstellen</a>
    </div>
    {% endif %}
</div>

<style>
.qr-code-small {
    width: 60px;
    height: 60px;
    border: 1px solid #ddd;
    padding: 2px;
    cursor: pointer;
    transition: transform 0.2s;
}

.qr-code-small:hover {
    transform: scale(1.2);
    border: 2px solid #007bff;
}

.text-muted {
    color: #999;
}

.alert {
    padding: 12px 16px;
    margin-bottom: 20px;
    border-radius: 4px;
    border-left: 4px solid;
}

.alert-danger {
    background-color: #f8d7da;
    color: #721c24;
    border-color: #f5c6cb;
}

.alert-info {
    background-color: #d1ecf1;
    color: #0c5460;
    border-color: #bee5eb;
}
</style>
{% endblock %}
