============================= test session starts ==============================
platform linux -- Python 3.14.2, pytest-7.4.3, pluggy-1.6.0 -- /home/y/Dokumente/vsCode/Benning-DGUV3/Software/PRG/venv/bin/python3.14
cachedir: .pytest_cache
metadata: {'Python': '3.14.2', 'Platform': 'Linux-6.18.6-2-cachyos-x86_64-with-glibc2.42', 'Packages': {'pytest': '7.4.3', 'pluggy': '1.6.0'}, 'Plugins': {'metadata': '3.1.1', 'mock': '3.12.0', 'html': '4.1.1', 'cov': '4.1.0'}}
rootdir: /home/y/Dokumente/vsCode/Benning-DGUV3/Software/PRG
configfile: pytest.ini
testpaths: tests
plugins: metadata-3.1.1, mock-3.12.0, html-4.1.1, cov-4.1.0
collecting ... collected 81 items

tests/test_device_api_integration.py::TestDeviceAPIEndpoints::test_list_devices_success PASSED [  1%]
tests/test_device_api_integration.py::TestDeviceAPIEndpoints::test_list_devices_empty PASSED [  2%]
tests/test_device_api_integration.py::TestDeviceAPIEndpoints::test_list_devices_error PASSED [  3%]
tests/test_device_api_integration.py::TestDeviceAPIEndpoints::test_get_device_success PASSED [  4%]
tests/test_device_api_integration.py::TestDeviceAPIEndpoints::test_get_device_not_found PASSED [  6%]
tests/test_device_api_integration.py::TestDeviceAPIEndpoints::test_create_device_success PASSED [  7%]
tests/test_device_api_integration.py::TestDeviceAPIEndpoints::test_create_device_missing_name PASSED [  8%]
tests/test_device_api_integration.py::TestDeviceAPIEndpoints::test_create_device_duplicate_id PASSED [  9%]
tests/test_device_api_integration.py::TestDeviceAPIEndpoints::test_update_device_success PASSED [ 11%]
tests/test_device_api_integration.py::TestDeviceAPIEndpoints::test_update_device_not_found FAILED [ 12%]
tests/test_device_api_integration.py::TestDeviceAPIEndpoints::test_delete_device_success PASSED [ 13%]
tests/test_device_api_integration.py::TestDeviceAPIEndpoints::test_delete_device_not_found PASSED [ 14%]
tests/test_device_api_integration.py::TestDeviceAPIEndpoints::test_get_next_id_success PASSED [ 16%]
tests/test_device_api_integration.py::TestFrontendRoutes::test_index_route PASSED [ 17%]
tests/test_device_api_integration.py::TestFrontendRoutes::test_devices_route PASSED [ 18%]
tests/test_device_api_integration.py::TestFrontendRoutes::test_device_detail_route FAILED [ 19%]
tests/test_device_api_integration.py::TestFrontendRoutes::test_quick_add_get PASSED [ 20%]
tests/test_device_api_integration.py::TestFrontendRoutes::test_quick_add_post PASSED [ 22%]
tests/test_device_api_integration.py::TestAPIErrorHandling::test_malformed_json PASSED [ 23%]
tests/test_device_api_integration.py::TestAPIErrorHandling::test_missing_content_type PASSED [ 24%]
tests/test_device_api_integration.py::TestAPIErrorHandling::test_nonexistent_endpoint PASSED [ 25%]
tests/test_device_domain.py::TestDeviceCreation::test_device_creation_with_all_fields PASSED [ 27%]
tests/test_device_domain.py::TestDeviceCreation::test_device_creation_with_minimal_fields PASSED [ 28%]
tests/test_device_domain.py::TestDeviceCreation::test_device_default_values PASSED [ 29%]
tests/test_device_domain.py::TestDeviceCreation::test_device_timestamps_set_automatically PASSED [ 30%]
tests/test_device_domain.py::TestDeviceUpdate::test_device_update_single_field PASSED [ 32%]
tests/test_device_domain.py::TestDeviceUpdate::test_device_update_multiple_fields PASSED [ 33%]
tests/test_device_domain.py::TestDeviceUpdate::test_device_update_nonexistent_field PASSED [ 34%]
tests/test_device_domain.py::TestDeviceUpdate::test_device_update_timestamp_changes PASSED [ 35%]
tests/test_device_domain.py::TestDeviceRepresentation::test_device_repr PASSED [ 37%]
tests/test_device_domain.py::TestDeviceRepresentation::test_device_repr_with_none_id PASSED [ 38%]
tests/test_device_domain.py::TestDeviceValidation::test_device_with_empty_name PASSED [ 39%]
tests/test_device_domain.py::TestDeviceValidation::test_device_with_special_characters PASSED [ 40%]
tests/test_device_domain.py::TestDeviceValidation::test_device_with_long_notes PASSED [ 41%]
tests/test_device_domain.py::TestDeviceEquality::test_two_devices_with_same_data PASSED [ 43%]
tests/test_device_domain.py::TestDeviceEquality::test_two_devices_with_different_data PASSED [ 44%]
tests/test_device_domain.py::TestDeviceConversion::test_device_to_dict PASSED [ 45%]
tests/test_device_domain.py::TestDeviceConversion::test_device_from_dict PASSED [ 46%]
tests/test_device_domain.py::TestDeviceEdgeCases::test_device_with_none_values PASSED [ 48%]
tests/test_device_domain.py::TestDeviceEdgeCases::test_device_update_with_none PASSED [ 49%]
tests/test_device_domain.py::TestDeviceEdgeCases::test_device_status_values PASSED [ 50%]
tests/test_device_domain.py::TestDeviceEdgeCases::test_device_with_numeric_strings PASSED [ 51%]
tests/test_device_domain.py::TestDeviceEdgeCases::test_device_timestamps_independent PASSED [ 53%]
tests/test_device_usecases.py::TestGetDeviceUseCase::test_get_device_success PASSED [ 54%]
tests/test_device_usecases.py::TestGetDeviceUseCase::test_get_device_not_found PASSED [ 55%]
tests/test_device_usecases.py::TestGetDeviceUseCase::test_get_device_repository_error PASSED [ 56%]
tests/test_device_usecases.py::TestListDevicesUseCase::test_list_devices_success PASSED [ 58%]
tests/test_device_usecases.py::TestListDevicesUseCase::test_list_devices_empty PASSED [ 59%]
tests/test_device_usecases.py::TestListDevicesUseCase::test_list_devices_repository_error PASSED [ 60%]
tests/test_device_usecases.py::TestCreateDeviceUseCase::test_create_device_success PASSED [ 61%]
tests/test_device_usecases.py::TestCreateDeviceUseCase::test_create_device_with_minimal_data PASSED [ 62%]
tests/test_device_usecases.py::TestCreateDeviceUseCase::test_create_device_repository_error PASSED [ 64%]
tests/test_device_usecases.py::TestCreateDeviceUseCase::test_create_device_duplicate_id PASSED [ 65%]
tests/test_device_usecases.py::TestUpdateDeviceUseCase::test_update_device_success PASSED [ 66%]
tests/test_device_usecases.py::TestUpdateDeviceUseCase::test_update_device_not_found PASSED [ 67%]
tests/test_device_usecases.py::TestUpdateDeviceUseCase::test_update_device_repository_error PASSED [ 69%]
tests/test_device_usecases.py::TestUpdateDeviceUseCase::test_update_device_partial_fields PASSED [ 70%]
tests/test_device_usecases.py::TestDeleteDeviceUseCase::test_delete_device_success PASSED [ 71%]
tests/test_device_usecases.py::TestDeleteDeviceUseCase::test_delete_device_not_found PASSED [ 72%]
tests/test_device_usecases.py::TestDeleteDeviceUseCase::test_delete_device_repository_error PASSED [ 74%]
tests/test_device_usecases.py::TestDeleteDeviceUseCase::test_delete_multiple_devices PASSED [ 75%]
tests/test_mysql_device_repository.py::TestMySQLDeviceRepositoryConnection::test_connection_success PASSED [ 76%]
tests/test_mysql_device_repository.py::TestMySQLDeviceRepositoryConnection::test_connection_with_correct_config PASSED [ 77%]
tests/test_mysql_device_repository.py::TestMySQLDeviceRepositoryCreate::test_create_device_success FAILED [ 79%]
tests/test_mysql_device_repository.py::TestMySQLDeviceRepositoryCreate::test_create_device_with_null_fields PASSED [ 80%]
tests/test_mysql_device_repository.py::TestMySQLDeviceRepositoryCreate::test_create_device_database_error PASSED [ 81%]
tests/test_mysql_device_repository.py::TestMySQLDeviceRepositoryRead::test_get_by_id_success PASSED [ 82%]
tests/test_mysql_device_repository.py::TestMySQLDeviceRepositoryRead::test_get_by_id_not_found PASSED [ 83%]
tests/test_mysql_device_repository.py::TestMySQLDeviceRepositoryRead::test_get_all_success PASSED [ 85%]
tests/test_mysql_device_repository.py::TestMySQLDeviceRepositoryRead::test_get_all_empty PASSED [ 86%]
tests/test_mysql_device_repository.py::TestMySQLDeviceRepositoryUpdate::test_update_device_success PASSED [ 87%]
tests/test_mysql_device_repository.py::TestMySQLDeviceRepositoryUpdate::test_update_device_with_null_fields FAILED [ 88%]
tests/test_mysql_device_repository.py::TestMySQLDeviceRepositoryDelete::test_delete_device_success PASSED [ 90%]
tests/test_mysql_device_repository.py::TestMySQLDeviceRepositoryDelete::test_delete_device_error PASSED [ 91%]
tests/test_mysql_device_repository.py::TestMySQLDeviceRepositoryHelpers::test_get_recent_success PASSED [ 92%]
tests/test_mysql_device_repository.py::TestMySQLDeviceRepositoryHelpers::test_get_by_status_success PASSED [ 93%]
tests/test_mysql_device_repository.py::TestMySQLDeviceRepositoryHelpers::test_get_next_id_success PASSED [ 95%]
tests/test_mysql_device_repository.py::TestMySQLDeviceRepositoryHelpers::test_get_next_id_empty_table PASSED [ 96%]
tests/unit/domain/test_device.py::test_device_creation PASSED            [ 97%]
tests/unit/domain/test_device.py::test_device_update PASSED              [ 98%]
tests/unit/domain/test_device.py::test_device_repr PASSED                [100%]

=================================== FAILURES ===================================
_____________ TestDeviceAPIEndpoints.test_update_device_not_found ______________
tests/test_device_api_integration.py:181: in test_update_device_not_found
    assert response.status_code == 200  # UseCase gibt None zur√ºck
E   assert 500 == 200
E    +  where 500 = <WrapperTestResponse streamed [500 INTERNAL SERVER ERROR]>.status_code
_________________ TestFrontendRoutes.test_device_detail_route __________________
tests/test_device_api_integration.py:233: in test_device_detail_route
    response = client.get('/device/1')
venv/lib/python3.14/site-packages/werkzeug/test.py:1243: in get
    return self.open(*args, **kw)
venv/lib/python3.14/site-packages/flask/testing.py:232: in open
    response = super().open(
venv/lib/python3.14/site-packages/werkzeug/test.py:1197: in open
    response = self.run_wsgi_app(request.environ, buffered=buffered)
venv/lib/python3.14/site-packages/werkzeug/test.py:1069: in run_wsgi_app
    rv = run_wsgi_app(self.application, environ, buffered=buffered)
venv/lib/python3.14/site-packages/werkzeug/test.py:1345: in run_wsgi_app
    app_rv = app(environ, start_response)
venv/lib/python3.14/site-packages/flask/app.py:2213: in __call__
    return self.wsgi_app(environ, start_response)
venv/lib/python3.14/site-packages/flask/app.py:2193: in wsgi_app
    response = self.handle_exception(e)
venv/lib/python3.14/site-packages/flask/app.py:2190: in wsgi_app
    response = self.full_dispatch_request()
venv/lib/python3.14/site-packages/flask/app.py:1486: in full_dispatch_request
    rv = self.handle_user_exception(e)
venv/lib/python3.14/site-packages/flask/app.py:1484: in full_dispatch_request
    rv = self.dispatch_request()
venv/lib/python3.14/site-packages/flask/app.py:1469: in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)
src/main.py:42: in device_detail
    return render_template('device_detail.html', device={}, inspections=[])
venv/lib/python3.14/site-packages/flask/templating.py:151: in render_template
    return _render(app, template, context)
venv/lib/python3.14/site-packages/flask/templating.py:132: in _render
    rv = template.render(context)
/usr/lib/python3.14/site-packages/jinja2/environment.py:1295: in render
    self.environment.handle_exception()
/usr/lib/python3.14/site-packages/jinja2/environment.py:942: in handle_exception
    raise rewrite_traceback_stack(source=source)
templates/device_detail.html:1: in top-level template code
    {% extends "base.html" %}
templates/base.html:22: in top-level template code
    {% block content %}{% endblock %}
templates/device_detail.html:33: in block 'content'
    <img src="{{ url_for('generate_qr', device_id=device.id) }}" alt="QR Code" style="width: 150px;">
venv/lib/python3.14/site-packages/flask/app.py:1697: in url_for
    return self.handle_url_build_error(error, endpoint, values)
venv/lib/python3.14/site-packages/flask/app.py:1686: in url_for
    rv = url_adapter.build(  # type: ignore[union-attr]
venv/lib/python3.14/site-packages/werkzeug/routing/map.py:950: in build
    raise BuildError(endpoint, values, method, self)
E   werkzeug.routing.exceptions.BuildError: Could not build url for endpoint 'generate_qr' with values ['device_id']. Did you mean 'devices.create_device' instead?
__________ TestMySQLDeviceRepositoryCreate.test_create_device_success __________
tests/test_mysql_device_repository.py:76: in test_create_device_success
    device = Device(
E   TypeError: Device.__init__() got an unexpected keyword argument 'device_type'
_____ TestMySQLDeviceRepositoryUpdate.test_update_device_with_null_fields ______
tests/test_mysql_device_repository.py:238: in test_update_device_with_null_fields
    device = Device(id=1, name="Test", device_type="")
E   TypeError: Device.__init__() got an unexpected keyword argument 'device_type'

---------- coverage: platform linux, python 3.14.2-final-0 -----------
Coverage HTML written to dir htmlcov

=========================== short test summary info ============================
FAILED tests/test_device_api_integration.py::TestDeviceAPIEndpoints::test_update_device_not_found
FAILED tests/test_device_api_integration.py::TestFrontendRoutes::test_device_detail_route
FAILED tests/test_mysql_device_repository.py::TestMySQLDeviceRepositoryCreate::test_create_device_success
FAILED tests/test_mysql_device_repository.py::TestMySQLDeviceRepositoryUpdate::test_update_device_with_null_fields
========================= 4 failed, 77 passed in 0.91s =========================
